SEGMENT DATA
ADDRESS 0x40000

_Segment:
D 0

_State:
D 0

_StateMachineJumpAddresses:
D State0 State1 State2

_TotalStates:
D 3

_Token:
BZ 256

_Character:
B 0

SEGMENT CODE
ADDRESS 0x10000

Start:
PUSHDL StateMachineLoop
JUMP

StateMachineLoop:
PUSHDL _State
PUSHD
PUSHDL 3
SL
PUSHDL _StateMachineJumpAddresses
ADD
PUSHD
JUMP

State0:
PUSHDL 1
PUSHDL _State
POPD
PUSHDL StateMachineLoop
JUMP
